# План автоматизации по Дипломному проекту по курсу Тестировщик ПО.

### Автоматизация тестирования комплексного сервиса, взаимодействующего с СУБД и API Банка
Приложение представляет из себя веб-сервис по покупке тура.

### 1. Перечень автоматизируемых сценариев
**Позитивные сценарии.**
Основная задача: тестирование покупки тура двумя способами:

* Оплата по дебетовой карте
 
* Выдача кредита по данным банковской карты

**Ожидаемый результат:** При оплате тура картой со статусом APPROVED , появляется сообщение: "Успешно! Операция одобрена банком". В базах данных  Mysql и PostgreSQL должны появиться данные об операции в таблицах:
* При оплате дебетовой картой - payment_entity и order_entity.
* При оплате в кредит - credit_request_entity и order_entity.

При оплате тура картой со статусом DECLINED, появляется сообщение: "Ошибка! Банк отказал в проведении операции". В базе данных запись формируется только в таблице payment_entity.

**Под Валидными данными понимаем:**

**Месяц** - +2 за текущим

**Год** - от 20 до 22 включительно  

**CVC** - от 100 до 999 включительно

**Владелец** - Имя Фамилия на латинице (генерируются библиотекой Faker)

**Номер карты** - 4444 4444 4444 4441 или 4444 4444 4444 4442

## Варианты сценариев:
**1.** Отправить заявку с валидными данными в случае приобретения тура с оплатой дебитовой APPROVED картой:
* Открыть в браузере  http://localhost:8080/
* На главной странице кликнуть кнопку "Купить"
* Заполнить поля валидными данными и кликнуть  кнопку "Продолжить"

 **Ожидаемый результат:** появляется всплывающее сообщение "Операция одобрена банком". 
 
 **Фактический результат**: после нажатия кнопки "Продолжить" текст на ней поменялся на "Отправляем запрос в банк". По окончании появляется сообщение: "Успешно.  Операция одобрена банком". В таблицах payment_entity и order_entity появляются записи.

**2.** Отправить заявку с валидными данными в случае приобретения тура с оплатой дебитовой DECLINED картой:
* Открыть в браузере  http://localhost:8080/
* На главной странице кликнуть кнопку "Купить"
* Заполнить поля валидными данными и кликнуть  кнопку "Продолжить"

 **Ожидаемый результат:** появляется  сообщение "Ошибка! Банк отказал в проведении операции"
 
 **Фактический результат:** после нажатия кнопки "Продолжить" текст на ней поменялся на "Отправляем запрос в банк". По окончании появляется сообщение: "Успешно. Операция одобрена банком" Тест упал.

**3.** Отправить заявку с валидными данными в случае приобретения тура в кредит по APPROVED карте:
* Открыть в браузере  http://localhost:8080/
* На главной странице кликнуть  кнопку "Купить в кредит"
* Заполнить поля валидными данными и кликнуть  кнопку "Продолжить"

 **Ожидаемый результат:** появляется  сообщение "Операция одобрена". 
 
 **Фактический результат:** после нажатия кнопки "Продолжить" текст на ней поменялся на "Отправляем запрос в банк". По окончании появляется сообщение: "Успешно. Операция одобрена банком". В поле bank_id таблицы credit_request_entity и в поле payment_id таблицы order_entity  появляются записи.

**4.** Отправить заявку с валидными данными в случае приобретения тура в  кредит по DECLINED карте:
* Открыть в браузере  http://localhost:8080/
* На главной странице кликнуть  кнопку "Купить в кредит"
* Заполнить поля валидными данными и кликнуть  кнопку "Продолжить"

 **Ожидаемый результат:** появляется  сообщение "Ошибка! Банк отказал в проведении операции"
 
 **Фактический результат:** после нажатия кнопки "Продолжить" текст на ней поменялся на "Отправляем запрос в банк". По окончании появляется сообщение: "Успешно. Операция одобрена банком" Тест упал.


**5.** Отправить заявку с дебетовой картой со статусом Approved. Проверить ответ от эмулятора банковской системы.
* Открыть в браузере  http://localhost:8080/
* На главной странице кликнуть  кнопку "Купить"
* Заполнить поля валидными данными. Номер карты 4444 4444 4444 4441. Кликнуть кнопку "Продолжить"

**Ожидаемый результат:** в поле status таблицы payment_entity появляется сообщение Approved.

**Фактический результат:** в поле status таблицы payment_entity появляется сообщение Approved.

**6.** Отправить заявку с кредитной картой со статусом Approved. Проверить ответ от эмулятора банковской системы.
* Открыть в браузере  http://localhost:8080/
* На главной странице кликнуть  кнопку "Купить в кредит"
* Заполнить поля валидными данными. Номер карты 4444 4444 4444 4441. Кликнуть кнопку "Продолжить"

**Ожидаемый результат:** в поле status таблицы credit_request_entity появляется сообщение Approved.

**Фактический результат:** в поле status таблицы credit_request__entity появляется сообщение Approved.

**7.** Отправить заявку с дебетовой картой со статусом Declined. Проверить ответ от эмулятора банковской системы.
* Открыть в браузере  http://localhost:8080/
* На главной странице кликнуть  кнопку "Купить"
* Заполнить поля валидными данными. Номер карты 4444 4444 4444 4442. Кликнуть кнопку "Продолжить"

**Ожидаемый результат:** в поле status таблицы payment_entity появляется сообщение Declined, в поле order_entity записей нет.

**Фактический результат:** в поле status таблицы payment_entity появляется сообщение Declined, в поле order_entity появляется запись. Тест упал.

**8.**  Отправить заявку с дебетовой картой со статусом Declined. Проверить ответ от эмулятора банковской системы.
* Открыть в браузере  http://localhost:8080/
* На главной странице кликнуть  кнопку "Купить в кредит"
* Заполнить поля валидными данными. Номер карты 4444 4444 4444 4442. Кликнуть кнопку "Продолжить"
       
**Ожидаемый результат:** в поле status таблицы credit_request_entity появляется сообщение Declined, в поле order_entity записей нет.
       
**Фактический результат:** в поле status таблицы credit_request_entity появляется сообщение Declined, в поле order_entity появляется запись. Тест упал.

## Негативные сценарии:
**Основная задача:** Проверяем ввод невалидных данных в поля персональных данных заявки на покупку тура.

**Ожидаемый результат:** При вводе невалидных данных в поля с данными карты возникают сообщения о неверном вводе, заявка не отправляется. В БД записи не формируются.

Перед началом тестирования на странице выбора способа оплаты:

* Для проверки оплаты тура по дебетовой карте нажимаем кнопку "Купить"

* Для проверки оплаты тура с помощью кредита, нажимаем кнопку "Купить в кредит

Далее сценарии для обоих способов оплаты идентичны.

## Варианты сценариев:
**1.** Все поля заполнены невалидными данными.
* Открыть  в браузере  http://localhost:8080/
* В поле номер карты ввести - "123"

  В поле месяц - "0"
  
  В поле год - "0"
  
  В поле "Владелец" - " "
  
  В поле cvc/cvv - "6"
  
  Нажать кнопку "Продолжить"

 **Ожидаемый результат:** под всеми полями появляются строки-предупреждения о неверном вводе данных. В БД записи не формируются.
 
 **Фактический результат:** под всеми полями появились строки-предупреждения о неверно введенных данных. Записи в БД не формируются.

**2.** Проверяем ввод прошедшего месяца. Год текущий, месяц предыдущий. Все остальные поля поля заполнены валидными данными.Статус карты Approved

**Ожидаемый результат:** должна показаться строка-напоминание о неверно введенной дате. Записи в БД не формируются.

**Фактический результат:** под полем Месяц появилась строка Неверно введен срок действия карты. В БД записей нет.

**3.** Проверяем ввод Имени и Фамилии Владельца кириллицей. Остальные поля заполнены валидными значениями.Статус карты Approved

 **Ожидаемый результат:** под полем "Владелец"появляется сообщение "Неверный формат"
 
 **Фактический результат:** появилось сообщение "Успешно. Операция одобрена банком". Тест упал.

**4.** Проверяем ввод года на несколько лет вперёд. Все остальные поля заполнены валидными значениями. Статус карты Approved..

**Ожидаемый результат:** должна показаться строка-напоминание о неверно введенной дате. Записи в БД не формируются.

**Фактический результат:** под полем Год появляется сообщение "Неверно указан срок действия карты". Запись в БД не формируется.

**5.** Проверка отправки заявки со всеми незаполненными полями. 

 **Ожидаемый результат:** Под полями Номер карты, Месяц, Год, CVC/CVV возникает сообщение "Неверный формат". Под полем  Владелец - сообщение Поле обязательно для заполнения.
 
 **Фактический результат:** Под полями Номер карты, Месяц, Год, CVC/CVV возникает сообщение "Неверный формат". Под полем  Владелец - сообщение Поле обязательно для заполнения.

**6 .** Проверка отправки заявки при заполнении поля Владелец произвольными символами (g4hj$$$uy&tr). Все остальные поля заполнены валидными данными. 

 **Ожидаемый результат:** под полем Владелец появляется сообщение "Неверный формат"
 
 **Фактический результат:**: Появляется сообщение "Успешно! Операция одобрена банком" Тест падает.
 
 **7.** Проверка отправки заявки при заполнении всех полей латиницей. 
  
 **Ожидаемый результат:** Под всеми полями появляется сообщение Неверный формат.
 
 **Фактический результат:** Под полем Владелец появляется сообщение Поле обязательно для заполнения. Тест упал.
 
**8.** Проверка отправки заявки с введенным в поле Номер карты несуществующим номером (5555 5555 5555 5555). Все остальные поля заполнены валидными данными.

**Ожидаемый результат:** под полем Номер карты появляется сообщение Неверный формат

**Фактический результат:** появляется сообщение Успешно! Заявка одобрена банком. Тест упал.

**9.** Проверка отправки заявки при заполнении поля Владелец цифрами. Все остальные поля заполнены валидными данными.

 **Ожидаемый результат:** под полем Владелец появляется сообщение Неверный формат.
 
 **Фактический результат:** появляется сообщение Успешно! Заявка одобрена банком. Тест упал.

**10.** Проверка отправки заявки при заполнении поля Номер карты символами.

 **Ожидаемый результат:** под полем Номер карты появляется сообщение "Неверный формат"
 
 **Фактический результат:** под полем Номер карты появляется сообщение "Неверный формат"
 
                               

### 2. Перечень используемых инструментов с обоснованием выбора
1. Java 8 — язык написания авто-тестов. Удобен тем, что поддерживает большое количество библиотек для написания кода автотестов.
1. IntelliJ IDEA — интегрированная среда разработки программного обеспечения. Подходит для работы на Java, JavaScript, Python. Выбор обусловлен тем, что автотесты написаны на Java, а IDEA содержит Java Virtual Machine. Поддерживает операционные системы Microsoft Windows, Linux, macOC.
1. Gradle — система управления зависимостями. Проект с автотестами создан на базе Gradle.
1. JUnit — платформа для написания авто-тестов и их запуска. Легко подключается в файле build.gradle.
1. Git и GitHub — удобно использовать для хранения версий
1. Selenide —  фреймворк для автоматизированного тестирования веб- приложений на основе Selenium WebDriver. Удобен тем, что легко добавляется в зависимости в файл build.gradle. Не требует отдельной загрузки браузера.
1. Faker -  библиотека, которую можно использовать для генерации случайных данных
1. Lombok - добавляет Java дополнительную функциональность, позволяет  избавиться от многословности. "Возвращает Java былую славу"
1. Allure -позволяет создать  наглядную картину выполнения тестов


### 3. Перечень и описание возможных рисков при автоматизации
1. Сложность нахождения необходимых селекторов в имеющейся структуре сайта
1. Риск выявления в ходе тестирования необходимости реализации дополнительных сценариев
1. Высокая трудоёмкость с организацией нескольких вариантов тестовых стендов: Windows, Linux, с Doker и без него
1. Возможные проблемы с интеграцией системы с Appveyor CI

### 4. Перечень необходимых специалистов для автоматизации
1. QA Engineer

### 5. Интервальная оценка с учетом рисков (в часах): 50-75 час.

### 6. План сдачи работы
1. Планирование автоматизации тестирования до 26.02.2020г.
1. Написание и выполнение тестов до 05.03.2020г.
1. Подготовке отчётных документов по итогам автоматизированного тестирования до 10.03.2020г.
1. Подготовка отчётных документов по итогам автоматизации до 16.03.2020г.
